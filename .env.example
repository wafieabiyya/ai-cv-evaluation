# ── Server ─────────────────────────────────────────────────────────────────────
PORT=3000

# ── Postgres ───────────────────────────────────────────────────────────────────
DATABASE_URL=postgres://postgres:postgres@localhost:5432/ai_cv_evaluation

# ── Redis / Queue ──────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379
QUEUE_NAME=evaluator

# ── LLM (response generation) ─────────────────────────────────────────────────
# Choose: gemini | openai
LLM_PROVIDER=gemini
# Gemini (default)
GEMINI_LLM_MODEL=gemini-2.0-flash
GEMINI_API_KEY=
# OpenAI (optional; only if LLM_PROVIDER=openai)
OPENAI_API_KEY=

# ── Embeddings (RAG) ──────────────────────────────────────────────────────────
# Choose: gemini | openai | mock
EMBEDDING_PROVIDER=gemini
# Gemini embeddings (768-dim)
GEMINI_EMBEDDING_MODEL=text-embedding-004
# OpenAI embeddings (optional; dim=1536)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# IMPORTANT: must match the chosen model (Gemini=768, OpenAI=1536)
EMBEDDING_DIM=768

# ── RAG / Extraction limits ───────────────────────────────────────────────────
RAG_TOPK=3
MAX_EXTRACT_CHARS=4000

# ── Decision thresholds (0–100) ───────────────────────────────────────────────
DECISION_STRONG=80
DECISION_PASS=65
DECISION_BORDERLINE=50

# ── BullMQ job retry/backoff (producer) ───────────────────────────────────────
JOB_ATTEMPTS=3
# "exponential" or "fixed"
JOB_BACKOFF_TYPE=exponential
JOB_BACKOFF_MS=5000

# ── Resilient Embedding (retry/circuit breaker/cache) ─────────────────────────
EMB_MAX_ATTEMPTS=4
EMB_BASE_DELAY_MS=400
EMB_CIRCUIT_FAILS=3
EMB_CIRCUIT_COOLDOWN_MS=12000
EMB_CACHE_TTL_SEC=86400

# ── Dev-only failure simulation (disable for prod) ────────────────────────────
SIMULATE_LLM_FAIL=0
SIMULATE_FAIL_RATE=0.3
